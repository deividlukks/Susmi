# ===================================================================
# Susmi API - Production Environment Variables
# ===================================================================
# Este arquivo serve como template para configuração de produção
# Copie para .env.production e preencha com valores reais

# -------------------------------------------------------------------
# DATABASE (PostgreSQL via Supabase)
# -------------------------------------------------------------------
# Connection pooling URL (para Railway/Vercel)
DATABASE_URL=postgresql://postgres.PROJECT_REF:PASSWORD@aws-1-sa-east-1.pooler.supabase.com:6543/postgres

# Direct connection URL (para migrations)
DIRECT_URL=postgresql://postgres:PASSWORD@db.PROJECT_REF.supabase.co:5432/postgres

# Database settings
DB_MAX_CONNECTIONS=10
DB_SSL=true

# -------------------------------------------------------------------
# REDIS (Cache e Filas - Upstash ou Redis Cloud)
# -------------------------------------------------------------------
# Opção 1: URL completa (Upstash - recomendado para serverless)
REDIS_URL=rediss://default:PASSWORD@HOST:6379

# Opção 2: Configuração individual (Redis Cloud/self-hosted)
REDIS_HOST=your-redis-host.cloud.redislabs.com
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_TTL=3600

# -------------------------------------------------------------------
# JWT (Autenticação)
# -------------------------------------------------------------------
# IMPORTANTE: Use um secret forte e único em produção!
# Gere com: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-strong-secret-key-here
JWT_ACCESS_EXPIRY=30m
JWT_REFRESH_EXPIRY=7d

# -------------------------------------------------------------------
# API (Backend NestJS)
# -------------------------------------------------------------------
# Railway fornece a variável PORT automaticamente
PORT=$PORT
API_HOST=0.0.0.0

# IMPORTANTE: Adicione os domínios do Vercel aqui após o deploy
CORS_ORIGINS=https://your-app.vercel.app,https://susmi-web.vercel.app

# -------------------------------------------------------------------
# SUPABASE (Autenticação e Storage)
# -------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=https://PROJECT_REF.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# JWT Secret do Supabase (encontre em: Project Settings > API > JWT Secret)
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# -------------------------------------------------------------------
# AI/LLM Configuration (Opcional)
# -------------------------------------------------------------------
# Provider: openai, anthropic, google, cohere
LLM_PROVIDER=anthropic
LLM_MODEL=claude-3-5-sonnet-20241022
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.7

# API Keys (adicione o que for usar)
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GOOGLE_AI_API_KEY=

# Ativar features de IA
ENABLE_LLM_FEATURES=false

# -------------------------------------------------------------------
# EMAIL (Opcional - para notificações)
# -------------------------------------------------------------------
EMAIL_ENABLED=false
EMAIL_FROM=noreply@yourdomain.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# -------------------------------------------------------------------
# PUSH NOTIFICATIONS (Web Push - Opcional)
# -------------------------------------------------------------------
PUSH_ENABLED=false
# Gere em: https://www.attheminute.com/vapid-key-generator
VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=

# -------------------------------------------------------------------
# INTEGRATIONS (Opcional)
# -------------------------------------------------------------------

# Google Services (Calendar, Gmail, etc.)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://your-api.railway.app/api/auth/google/callback

# Microsoft Services (Outlook, etc.)
OUTLOOK_CLIENT_ID=
OUTLOOK_CLIENT_SECRET=
OUTLOOK_TENANT_ID=common
OUTLOOK_REDIRECT_URI=https://your-api.railway.app/api/auth/outlook/callback

# Vector Database - Pinecone (para Knowledge Base)
PINECONE_API_KEY=
PINECONE_ENVIRONMENT=
PINECONE_INDEX_HOST=

# Wearables (Fitbit, Google Fit, etc.)
FITBIT_CLIENT_ID=
FITBIT_CLIENT_SECRET=
GOOGLE_FIT_CLIENT_ID=
GOOGLE_FIT_CLIENT_SECRET=

# Home Automation
TUYA_ACCESS_ID=
TUYA_ACCESS_SECRET=
TUYA_REGION=us

# -------------------------------------------------------------------
# ENVIRONMENT
# -------------------------------------------------------------------
NODE_ENV=production
LOG_LEVEL=info

# -------------------------------------------------------------------
# HEALTH CHECK
# -------------------------------------------------------------------
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000

# -------------------------------------------------------------------
# RATE LIMITING (Opcional)
# -------------------------------------------------------------------
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# -------------------------------------------------------------------
# FILE UPLOAD (Opcional)
# -------------------------------------------------------------------
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,application/pdf
